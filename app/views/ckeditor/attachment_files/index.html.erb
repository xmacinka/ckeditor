<form action="<%= url_for params.except(:search, :controller, :action) %>" id="ckeditor-search">
<% params.except(:search, :controller, :action).each do |key,param| %>
  <input type="hidden" name="<%= key %>" value="<%= param %>">
<% end %>
<input class="search-by-name" type="text" name="search" value="<%= params[:search] %>">
<input type="submit" value="Search by filename" class="btn">
</form>
<div id="fileupload" class="gal-holder">
  <div class="gal-item">
    <div class="fileupload-button gal-upload-holder">
  		<%= link_to I18n.t(:upload, :scope => [:ckeditor, :buttons]), 'javascript:void(0)', :class => "add" %>
		</div>
	</div>
  
  <div class="fileupload-list">
    <%= render :partial => 'ckeditor/shared/asset', :collection => @attachments.scoped %>		
  </div>

  <%= will_paginate @attachments %>
</div>

<script type="text/javascript">
  <%= Ckeditor::Utils.js_fileuploader('attachments') %>
</script>
